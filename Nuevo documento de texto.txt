1) terminal de windows y escribo "mongod"

2)abro mi projecto en vsc 

3) git init --> inicio el repositorio de git
4) npm ini --yes --> para crear el package.json
5) cambio en package json --> cambio name description y author

6) npm i express y nodemon --> nodemon nos tiene siempre act el sv (inicializos express y nodemon)

7) creo .gitignore 

8) creo index.js


9) añado "dev": "nodemon index.js a mi package.json


10) abro el compass de mongo y inicializo

(para instalar mongoose en ordena npm i mongoose)



11) importo en el index esto de mongoose :    mongoose.connect('mongodb://127.0.0.1:27017/test')
y creo el .then y el .catch  (en vez de localhost si no func apongo 127.0.0.1)



12) npm i dotenv inicializo dotenv

13) meto require('dotenv').config(); // para q funcione dotenv en mi index.js

14) creo .env y .env.example

15) creo .env.example meto las claves de las variables para q mi app funcione, sirve para que otro usuario pueda saber el nombre de las variables para que copie la app

16) pillo lo q esta en mongoose.connect() y lo copio en .env y en mongoose.connect pongo process.env.MONGO_URI (el nombre de la variable)

17) creo la variable port que pille desde el .env y cambio el app.listen del index y añado port en vez del numero del puerto

18) Refactorizo codigo:

18.1) creo carpeta config y creo fichero llamado database.js

18.2) corto el codigo de connection to mongodb de index y lo paso a database.js

18.3) importo con const mongoose = require('mongoose') quitandolo dle index ;

18.4) exporto el modulo de mongoose con : module.exports = mongoose

18.5) creo en index const require = (y paso la url de config/database donde tengo mongoose)

18.6) en database.js meto mongoose.connect en una constante llamada db y exporto db
18.7) despues en index conecto a require(.config/database) con la constante db y llamo en rutas a db()

18.8) en index una vez llamado db() hago un .then y en la funcion paso app.listen con el puerto y creo un catch en caso de que tenga un error

19) mongoatlas creo un nuevo cluster con aws sv en paris y una vez creado en quickstart le pongo una contra y usuario y la copio en el .env y creo las variables en .env.expr

19.1) le doy a connect y le tengo q indicar que tipo de ip y usuario pueden acceder a la app le doy a allow anyware
(en network access puedo modificar lo que hice en el punto 19.1 en un futuro)

19.2) voy a database y le doy connect le doy a connect ur application y copio la url

19.3) con la url copiada voy a mongodb compass creo una nueva conexion y en la url copio la url que tengo y en vez de password le copio la password que me salve antes en el .env quitando las <> tal que asi:mongodb+srv://datata:4FCowWUhbCUjcD2j@cluster0.aibnjoy.mongodb.net/?retryWrites=true&w=majority

19.4) cambio en .env a MONGO_URI y le paso la url despues del / y antes del ? le paso test
 